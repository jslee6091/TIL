### 마이크로컴퓨터의 구성

- CPU
  - 중앙 처리 장치
  - 계산에 필요한 부품을 하나의 칩으로 만든 것
  - PC(Program Counter) : ROM 내 프로그램의 어디를 참고할지 관리하는 하드웨어.
  - 다음에 실행할 명령을 읽을 위치를 CPU에 전달
  - 디코더 : 읽어 들인 명령의 의미를 해독하는 하드웨어
  - ALU : 덧셈, 뺄셈 등 사칙 연산과 AND, OR 등 논리 연산 실행하는 하드웨어
  - 범용 레지스터 : CPU에 내장된 범용 메모리로서 CPU가 프로그램 실행 할 때 일시적으로 이용하는 메모리
  - 시스템 레지스터 : CPU가 명령을 실행할 때 이용하는 레지스터
  - 명령을 보관하는 명령 레지스터, 주소를 관리하는 주소 레지스터, CPU 상태를 관리하는 상태 레지스터 등이 있음
- Memory
  - RAM
    - 프로그램 실행 시 일시적으로 데이터 보관이 필요할 경우에 사용됨
    - 전원이 꺼지면 내용이 사라지는 휘발성 메모리
  - ROM
    - 읽기 전용 메모리
    - 프로그램을 보관해두고 CPU로부터 읽기 요구가 있을 때 프로그램을 읽어서 CPU에 전달함
    - 주소(address)로 나뉜 구획이 있고 각각의 구획에 기계어의 명령이 보관됨
    - 전원이 꺼져도 내용이 사라지지 않는 비휘발성 메모리
- Peripheral(주변장치)
  - 주변에서 접속되는 하드웨어
    - DMA 컨트롤러 : CPU를 사용하지 않고 직접 메모리에 액세스하는 주변 장치
    - DMA 컨트롤러를 이용하면 CPU는 메모리를 읽고 쓰는 도중 다른 처리가 가능함
    - 타이머 : 주변 장치에 대한 주기적 감시, 데이터 출력 등 시간 관련 처리를 위한 주변 장치
    - RTC(Real Time Clock) : 시간을 관리하기 위한 주변 장치
    - GPIO(General Purpose Input/Output) : CPU가 외부로부터의 입력 및 출력을 범용으로 입출력할 수 있는 포트
  - CPU가 제어함
    - 제어 방식 : 레지스터라는 제어용 메모리에 읽기/쓰기를 통해 제어
    - Memory Mapped I/O : ROM, RAM과 함께 주변장치의 레지스터도 메모리로 취급
    - I/O Mapped I/O : 주변 장치가 ROM, RAM과 함께 메모리 공간으로 취급되지 않고 별도의 명령으로 제어가 이루어짐
  - **버스(bus)**라는 신호선에 접속되어 입출력 데이터가 전달됨
- 버스
  - 메인 버스
    - 고속으로 동작하는 버스
    - 메모리와 같은 고속 주변장치는 고속으로 제어해야 하므로 메인 버스에 접속한다.
    - 주소 버스 : 메모리나 주변장치에 접근할 특정 위치를 나타내기 위해 이용되는 신호선
    - 데이터 버스 : 메모리나 주변장치로부터 데이터를 읽어 들이기 위한 신호선
    - 컨트롤 버스 : 메모리나 주변장치를 제어하기 위한 신호선
    - 각 버스 신호는 클럭이라는 타이밍 신호에 동기화되어 메모리나 주변장치에 지시를 전달하는 데 사용됨
  - 로컬 버스
    - 메인 버스와 다르게 저속으로(메인 버스의 클럭 속도보다 느린) 동작하는 주변 장치를 제어하는 버스
    - 브리지를 경유하여 로컬 버스에 접속
    - 브리지: 메인 버스와 로컬 버스를 연결하는 컨트롤러, 하드웨어 구성에 따라 다른 이름으로 부르기도 함.
    - 브리지는 고속으로 동작하는 메인 버스와 저속의 로컬 버스의 속도차를 통제하여 데이터가 전송되게 해준다.
    - UART : 동기식 직렬 신호를 병렬 신호로, 또는 그 반대로 변환하는 하드웨어로서 로컬 버스에 접속한다.
    - UART끼리 통신할 때는 비동기 직렬 통신을 처리한다.
    - I2C : 시리얼 제어 버스로서 시리얼 클럭과 양방향 시리얼 데이터의 2개의 신호선을 사용하여 통신하는 동기식 직렬 통신
    - 마스터와 슬레이브 관계로 이루어져서 마스터가 여러 슬레이브 장치를 선택하여 통신한다.
    - SPI : 시리얼로 제어하는 버스로서 시리얼 클럭과 단방향 시리얼 데이터 인, 아웃의 3가지 신호선으로 통신하는 동기식 직렬 통신
    - 마스터와 슬레이브로 이루어져 있는데 I2C와 다른 점은 슬레이브를 선택하기 위해 슬레이브 셀렉트를 이용한다.
- 인터럽트
  - 인터럽트는 주변장치로부터 처리 요구를 CPU에 통지하기 위한 신호
  - CPU는 인터럽트 신호를 받으면 **인터럽트 벡터 테이블**이라는 전용 위치에 실행이 옮겨짐
  - 인터럽트 처리 끝나면 원래 위치로 돌아와 하던 동작 계속 실행
  - CPU 내부의 타이머로부터 발생하는 **타이머 인터럽트**와 주변장치 등 외부 하드웨어로부터 발생하는 **외부 인터럽트**가 있음
  - **인터럽트 벡터**는 발생한 인터럽트의 종류에 대응한 처리를(정확히는 처리가 존재하는 메모리 상의 주소) 등록한 것이다.

